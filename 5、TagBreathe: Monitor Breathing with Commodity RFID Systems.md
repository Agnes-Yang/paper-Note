## ：backscatter,frequency hopping
## abstract

呼吸监测有助于评估一般的个人健康，并为慢性疾病提供线索。然而目前的呼吸监测技术是不方便和侵入性的。例如，典型的呼吸监测设备需要将鼻探针或胸带连接到用户。无线传感技术已经被用于监测使用无线电波的呼吸而没有物理接触。然而，这些无线传感技术需要定制无线电，更重要的是，由于干扰，这些技术对于多个用户来说效果不佳。在有多个用户的情况下，现有系统的检测精度显着降低。在本文中，我们建议使用商用现货（COTS）RFID系统来监测用户的呼吸。在我们的系统中，被动式轻量级RFID标签附着在用户的衣服和backscatter无线电波上，商品RFID读卡器报告低等级数据（例如相位值）。我们通过分析读卡器报告的低级数据来追踪由于吸气和呼气所引起的周期性身体活动。为了提高测量的鲁棒性，我们从多个标签阵列合成数据流，以提高监控精度。我们的设计遵循标准EPC协议，该协议在存在多个标签的情况下仲裁碰撞。我们实现了一个带商品RFID系统的呼吸监测系统原型。实验结果表明，即使存在多个用户，原型系统也可以同时高精度地监测呼吸。
## I.introduction
近年来，移动和可穿戴传感设备及其在健康监测方面的应用大量涌现。 呼吸监测评估一般的个人健康，为慢性疾病提供线索，追踪康复的进展[5]。 科学研究表明，深呼吸可以降低血压和压力，而浅呼吸和无意识的呼吸表明慢性压力[6]。 人们可能会有不规则的呼吸模式，在快速和慢速之间交替出现，偶尔会有暂停[7]。 因此，便利的非侵入式呼吸监测系统将会有所帮助，并能够实现创新的医疗保健应用。

然而目前的呼吸监测技术是不方便和侵入性的。 例如，呼吸监测装置通常需要人附加鼻探针或穿戴胸带[9]。 这种监视装置限制身体运动并造成不便。 因此，人们可能会感到不舒服，佩戴鼻探针或忘记戴胸带。 父母对新生儿呼吸监测设备的安全性表示担忧。 虽然传感器嵌入式可穿戴设备（例如智能手表）可以监测一些生命体征（例如心率），但是它们不能准确地监测呼吸。

最近的无线传感技术探索了使用无线信号捕捉生命体征（例如呼吸模式）的可能性[9,13,17]。 这种技术将无线信号传输到对象并捕获在吸气和呼气期间由胸部运动引起的反射无线电波的周期性变化。 然而，这些系统需要定制的多普勒无线电，而这些无线电在市场上不易获得。 更重要的是，当存在多个用户时，来自用户的反射的无线电波可能造成干扰，并且显着降低监测精度。 即使在监测单个主体时，由于身体的不同部位同时反射无线电波，准确地监测用户的呼吸模式仍然是具有挑战性的。

我们问以下问题：我们可以使用COTS系统来同时监测多个用户的呼吸吗？ 在本文中，我们利用COTS RFID系统实施名为TagBreathe的呼吸监测系统，即使在有多个用户的情况下也能准确监测呼吸。 TagBreathe系统由附在用户衣服上的多个被动商品RFID标签和商品RFID读取器构成，该商品RFID读取器捕获来自标签的反射无线电波。 研究人员已经将RFID芯片嵌入到可以织造和编织的纱线中，以制造用于RFID服装的织物[8,26]。 与传统的电池供电的传感器不同，一旦贴在布料上或嵌入布料中，轻薄的RFID标签对用户来说几乎没有侵入性。

由于呼吸期间的胸部运动，标签与阅读器之间的距离周期性变化。 当用户吸气时，距离减小，而用户呼气时距离增加。 距离上的这种微小变化转化为由读者报告的低级别信息（例如，相位值）的数据流的小变化。 TagBreathe聚合低级信息并从数据流中提取周期性模式。 TagBreathe与标准EPC协议兼容，受益于冲突仲裁，自然避免了多个backscatter标签的干扰[4]。

然而，实施TagBreathe需要很大的挑战。 基于商品读者报告的低级数据的仔细表征，我们首先对收集的相位值进行预处理。 由于跳频，当读取器跳到下一个频率通道时，相位值显着变化。 我们不是用原始相位值直接跟踪身体运动，而是在相同频率的两个连续相位读数中计算位移，并用位移值连续跟踪身体的运动。 然后我们进行频域分析，从位移值中提取有节奏的呼吸信号。 为了更好地提取微弱的呼吸信号，我们进一步形成多个标签阵列并融合多个标签报告的位移值，以提高监测性能。

我们整合上述技术，并使用COTS RFID系统实施TagBreathe。 我们在不同的实验参数设置下评估TagBreathe。 实验结果表明TagBreathe能够以高精度同时监测多个用户的呼吸。 特别是，TagBreathe可以达到高呼吸频率检测精度，对于不同呼吸频率，平均每分钟误差小于1次呼吸。

本文的贡献可以概括如下。 首先，就我们所知，TagBreathe是第一个可以使用COTS RFID系统监测呼吸的系统。 其次，我们设计并实现了信号提取算法，以便对COTS RFID阅读器报告的低级数据进行仔细的表征。 第三，我们在各种实际情况下广泛评估TagBreathe系统，并展示使用COTS RFID系统无线监测呼吸的可行性。

本文的其余部分安排如下。 我们在第二部分简要介绍呼吸监测和COTS RFID系统的背景。 我们在第三部分介绍TagBreathe的概况。 我们在第四节给出了TagBreathe关键技术组件的详细描述。 我们分别在第五部分和第六部分的绩效评估中给出实施。 第七节总结了相关的工作。 第八节总结本文。
## conclusion
在本文中，我们提出了是否可以使用COTS系统来无线监测呼吸的问题。 我们通过设计和实施TagBreathe来提供肯定的答案，它利用COTS RFID系统无线感知多个用户的呼吸。 TagBreathe遵循标准的冲突仲裁协议，自然分离来自轻量级无源标签的背向散射信号，这使我们能够同时监测多个用户的呼吸。 我们仔细设计信号处理算法，从商品读者报告的低层数据中提取呼吸信号。 TagBreathe利用广泛的低级数据流传感器融合进一步增强了监测性能。 我们在各种工作场景下实施并评估了TagBreathe。 实验结果表明，TagBreathe可以监控多个用户的呼吸，并直接通过COTS RFID系统实现无线传感的优势。
## II.background
#### Breath monitoring system
呼吸监测系统通常需要用户附加鼻探针或穿胸带[9]。例如，二氧化碳监测仪[23]需要将鼻插管连接到患者以监测呼吸[10]。可穿戴设备（例如智能手表）配备有传感器，但不能准确地监测呼吸模式[9]。最近的无线传感技术已经通过测量人体反射的无线信号来探索提取呼吸模式的可行性[9,13,17]。这种技术将无线信号传输给人体，并捕获由于呼吸而引起的反射无线电波的变化。通过提高采样率，最近的工作提高了检测分辨率。为了检测小的胸部运动，这样的系统需要GHz采样率，这导致高制造成本。相反，多普勒无线电发射线性增加的频率，并测量由于距离变化的频移[9]。然而，这些系统需要定制的多普勒无线电，这些无线电不容易获得。更重要的是，由于来自不同用户的反射无线电信号在空中混合并相互干扰，因此这种监测系统可能在多个用户的存在下失效。结果，以前的无线传感系统只能监测一个用户，并且对多个人类主体表现不佳。

#### RFID sensing
COTS RFID系统近年来发展了精确的定位和跟踪[35]。与传统的基于信号强度的定位方案[24]不同，最近的方案基于背向散射无线电波的低电平相位值跟踪RFID标签的位置。 COTS RFID阅读器测量RFID物理层的低层信息，并为每个标识的标签输出相位值。尽管相位测量受噪声影响，但COTS RFID系统的高分辨率和高采样率为实现准确定位提供了机会。通过结合相位测量的多次读数，最近的工作取消了噪声，并达到厘米级精度[35]。 TagBreathe不是瞄准更高的定位精度，而是从这些作品中吸取力量，并延伸到呼吸监测。

无源RFID标签具有成本低，重量轻和体积小的特点，非常适合非侵入式呼吸监测。一旦无缝地贴在用户的布上，被动的轻质标签对用户来说几乎没有侵入性。时装和纺织行业开始将RFID芯片嵌入到RFID服装的织物中，这为非侵入性的经济有效的医疗监护提供了机会[8,26]。无源标签从商品读取器获取能量，并且反射所传入的无线电波以发送消息。

商品读取器测量物理层处的反向散射信号的相位信息，并报告每个成功识别的标签的相位值。假设阅读器天线和标签之间的距离是d。当无线电波在反向散射通信中在阅读器天线和标签之间来回移动时，无线电波横跨总距离2d。然后阅读器输出后向散射电波的相位值如下:

**θ = (2π/λ× 2d + c) mod 2π,(1)**
其中λ是波长，c是一个恒定的相位偏移量，它与阅读器天线和标签之间的距离无关,捕捉阅读器和标签电路的影响。 相位值在反向散射通信中每λ/2的距离以2π弧度周期重复(???)。 COTS RFID阅读器（例如Impinj R420 [1]）可以被编程为输出low level data用于应用开发。 在有多个标签的情况下，阅读器根据标准RFID协议的避免冲突，并且报告相位值而不受干扰。 TagBreathe旨在利用COTS RFID系统来测量贴在用户衣服上的RFID标签的相位值，同时监测多个用户的呼吸。
## III.system overview
TagBreathe的intuition在于无线电波通过附着在人体上的商品标签上反射，因此无线电波的相位将被身体的呼吸运动调节。通过仔细分析相位值的数据流，我们的目标是通过以下三个关键技术来提取呼吸信号，我们将在第四节中详细阐述。 
1. Phase Measurement and Preprocessing. COTS RFID阅读器测量附着在用户衣服上的标签的反向散射信号的相位值。 COTS RFID阅读器报告每个标签识别的相位值以及相位测量的时间戳。 TagBreathe不断读取相位值，并根据不同的用户在多个用户的情况下对相位值进行分组。相位值的变化指示身体运动。 
2. Breath Signal Extraction. TagBreathe根据吸气和呼气期间胸腔引起的周期性变化影响相位值的观察结果来提取呼吸信号。我们利用人类呼吸速率的先验知识，并采用低通滤波器来提取呼吸信号。 
3. Enhance Monitoring with Multiple Tags.为了减轻数据包丢失和视线路径阻塞的影响，TagBreathe为每个用户添加了多个标签。我们使用多个天线来确保监控区域的全面覆盖。商品读卡器安排天线，并以循环方式工作，而不受天线之间的干扰。 TagBreathe结合了标签阵列中的多个数据流，在实际情况下增强了监控的鲁棒性。
## IV.the TagBreathe system
#### A.Low level data characterization
COTS RFID读取器为每个成功识别的标签报告low level info（例如，接收信号强度，相位值，多普勒频移等）以支持各种应用。 RFID标签通过反射或吸收导致两种可能状态（即高（H）和低（L））的无线电信号来调制输入的无线电信号[18,25]。如图所示，物理层符号（在图1中用十字表示）在星座图中具有两个簇（即H1和L）。矢量→LH1的大小测量接收信号强度，而θ测量反向散射信号的相位值。由于多普勒频移，在一个分组传输期间，一个符号簇可以在星座图中旋转（例如从H1到H2）。如图所示，Δθ测量指示星座图中多普勒频移的相位旋转[3]。

在最初的实验中，衣服上贴着passive tag的使用者在距读卡器天线2m处自然地呼吸。我们使用Impinj R420读取器收集低水平读数25秒。数据采样率约为64Hz，即每秒64个读数。采样率足够高以捕捉人类受试者相对较低的呼吸率（例如，每分钟大约10-20次呼吸）。low level data报告接收信号强度，原始相位值，原始多普勒频移，时间标记和标签ID。
1. Received signal strength.
图2绘出了收集的接收信号强度指标（RSSI）数据，其显示RSSI读数的周期性变化的明显趋势。 这是因为当用户吸气时，身体靠近读取器的天线，因此后向散射信号的强度增加，而用户呼出RSSI读数减小。 最初的实验表明，在理想的情况下可以用RSSI读数跟踪呼吸模式。 RSSI测量的限制在于其高敏感性和低分辨率。 例如，COTS阅读器的分辨率仅为0.5 dBm。 由于RSSI读数的分辨率低和敏感性，因此很难在更具挑战性的工作场景中精确地提取微妙的身体动作。
2. Doppler frequency shift
图3绘出了原始多普勒频移，其包络线大致跟踪周期性变化。 COTS阅读器在一次背向散射数据包传输过程中计算相位旋转的多普勒频移如下[1]:
**f = Δθ/4πΔT,(2)**
其中f表示多普勒频移，Δθ表示一个反向散射分组传输期间的相位旋转，ΔT表示分组传输的持续时间。在图中我们看到虽然原始的多普勒频移是有噪声的，但我们仍然可以观察到测量数据的一些周期性变化。多普勒频移测量的限制在于，由于分组传输的持续时间ΔT相对较小，所以在一个分组传输期间测量的相位旋转Δθ不可靠，并且在实践中可能受到噪声影响。这样，多普勒频移需要RFID标记物体的相对较高的移动速度，以在分组传输的短持续时间期间产生显着的Δθ。 
3. Phase values
图4绘出了测量过程中的相位值。由于信道跳频，当读取器跳到下一个通道时，即使标签是静态的，相位值也会不连续地改变。正如EPC标准协议[4]所规定的那样，COTS阅读器在频率信道之间跳变，以减轻频率选择性衰落和同频道干扰。图5描绘了显示读取器在10个频道中跳跃并且驻留在每个频道中约0.2s的频道索引。当读者跳到相邻通道时，方程（1）中的波长λ和相位偏移c也会改变，导致相位值每隔0.2s不连续[34]。某些地区（例如美国，新加坡，香港）的商品阅读器可能不支持固定频率的频道[4]，因为某一频率的连续无线电波可能会引起同频干扰，违反无线电频率规定。

为了不受信道跳频的影响，不断追踪身体的运动，我们首先根据信道指标对相位值进行分组。然后，根据公式（1）计算每个通道两个连续相位读数的位移。由于身体移动速度相对较低并且采样率较高（例如，> 60Hz），所以在两个连续相位读数期间的标签位移在无线电波长的一半内。因此，我们计算两个连续阶段读数的位移如下:
**Δdi+1 = di+1 − di = λ/4π (θi+1 − θi),(3)**
其中Δdi+ 1表示时间i + 1处的位移，并且θi+ 1和θi表示在相同频道中测量的两个连续相位读数。 然后我们测量N个读数的总位移如下：
**Dj =sigma(i=1~N):Δd_i+j ,(4)**

我们对位移值进行归一化，并将结果绘制在图6中。我们可以看到，位移值不受跳频的影响，并且主要由于呼吸而跟踪周期性身体运动。
#### B.Breath Signal Extraction
我们使用傅里叶变换（FFT）分析测量期间收集的位移值。 图7显示了FFT结果。 在该图中，FFT输出的峰值对应于呼吸率。 对于w秒的窗口大小，傅立叶变换的缺陷之一是其分辨率为1/w。 换句话说，更宽的窗口提供更好的频率分辨率，但时间分辨率差。 在我们最初的实验中，由于窗口大小为25秒，频率分辨率为0.04赫兹，相当于每分钟2.4次呼吸。

我们不是通过查找FFT输出的峰值来测量呼吸频率，而是使用基于FFT的低通滤波器滤除高频噪声，然后提取呼吸信号。我们注意到，一个健康的人在休息时的典型呼吸频率大约是每分钟12-20次，通常低于每分钟40次呼吸。因此，我们首先应用FFT将时域位移值转换到频域，并将低通滤波器的截止频率设置为0.67Hz(???)。之后，我们使用逆FFT（IFFT）将其转换回时域位移值。图8绘制了应用低通滤波器后提取的呼吸信号。在图中，我们看到噪音被成功滤除了。提取的信号呈现明显的趋势，我们可以应用时域分析来研究呼吸信号。也可以采用有限冲击响应（FIR）低通滤波器来提取呼吸信号。

为了监测呼吸率，我们检测到过零点，如图8所示。我们记录过零点事件的时间戳记为ti，计算瞬时呼吸率如下:

**f_BR(ti) = (M − 1)/2(ti − ti−M),(5)(???)**
其中M表示缓存的过零点的数量。 为了增强鲁棒性，我们缓冲了7次与3次呼吸相对应的过零点，以计算实时可视化的呼吸速率。
####  C.Enhance Monitoring with Sensor Fusion of Multiple Tags
在下文中，我们描述如何使用来自多个RFID标签的数据流的传感器融合来增强呼吸监测。 直观地说，我们不是仅为每个用户使用一个标签，而是通过为每个用户附加多个RFID标签来形成标签阵列，以提高信号强度并确保可以读取一些标签以减轻阻塞视线路径的影响。 为此，我们聚合来自标签的数据流并将它们融合在一起，以使原始数据流彼此重新加强，并增强由于身体移动而产生的周期性信号。 通过这样做，我们提高了监测性能，特别是在提取微弱的呼吸信号方面。

我们附加一个由n个RFID标签{T1，T2，...，Tn}组成的标签阵列给用户。我们用一个64位用户ID和一个32位短标签ID来覆盖96位标签ID，如图9所示。64位用户ID允许我们区分用户并为每个用户分组n个标签。 32位标签ID允许我们区分标签并计算每个标签的位移值(???)。通过这样做，一旦标签被识别，就可以根据用户ID和标签ID来分类低级数据。我们根据64位用户ID对同一用户的传感器数据进行分组，并融合来自{T1，T2，...，Tn}的n个数据流，以提高监控性能。在有多个用户的情况下，可以通过检查用户ID来根据不同的用户来融合低级别数据。因此，我们专注于同一用户的多个标签的传感器融合。请注意，覆盖标签ID是由商品RFID系统（例如，Impinj R420）支持的标准RFID操作。如果不支持覆盖操作，读者可以建立映射表来映射和查找96位标签ID到用户ID和短标签ID。

在传感器融合中，可以从每个数据流中提取呼吸信号，并将结果融合在最终融合阶段。但与之相反地，我们通过在提取呼吸信号之前融合原始数据来执行低级数据融合。这是因为我们可以通过融合原始数据来有效地提高信号强度，特别是在信号较弱的情况下，这大大增强了信号提取。此外，由于呼吸信号提取涉及相对较高的计算开销，低级别传感器融合减少了计算开销，反之则涉及多个提取操作。

在数据融合过程中，我们首先根据式（3）计算每个标签的位移值。 在时间段[t，t +Δt]内收集的标签Tj的位移值表示为Δd_Tj_i + 1（t +δt），1≤j≤n，0≤δt≤Δt。 我们将时间间隔[t，t +Δt]中n个标签的位移值聚合起来，并按如下方式将它们融合在一起:
**Δd(t) = sigma(j=1~n)sigma(δt=0~Δt):Δd_Tj_i+1 (t + δt) (6)**
然后我们测量N个时间间隔内的总位移（即[t，t +NΔt]）如下:
**ΔD(t) =sigma(i=0~N):Δd(t + iΔt).(7)**
我们处理在每个Δt处采样得到的融合数据流ΔD（t），并使用呼吸信号提取算法（第IV-B节）提取呼吸信号。 

图10显示了整个工作流程。 TagBreathe询问连接到用户的多个RFID标签，并从这些标签收集低水平的数据（第IV-A节）。 TagBreathe根据用户ID对读数进行分组，并通过合成多个数据流来执行原始数据融合（第IV-C节）。 TagBreathe分析合成的数据流并为每个用户提取呼吸信号（IV-B部分）。
#### D.Discussion
1. Tag placement.经过不同用户的多次试验后，我们发现有些用户用胸部呼吸，而其他用户则用腹部呼吸。为了更好地捕捉呼吸模式，我们在每个使用者的上身放置三个标签：一个在胸部，一个在下腹部，一个在中间。请注意，当用户吸气或呼气时，三个标签相对于阅读器天线的相对位移同时减小或增加，这使得我们可以建构性地融合传感器数据并增强呼吸信号。
2. Enhancement with RSSI and Doppler frequency shift.TagBreathe主要使用从相位值推断的位移值来监测呼吸。在低层数据表征（第四节A）中，我们注意到虽然RSSI和多普勒频移有其限制，但它们在实验中也是信息性的。一种可能的增强是将RSSI和多普勒频移与相位值融合，以提高监测精度。
3. Multiple antennas.为了增加通信范围，商品读取器可以连接到多个天线（例如，一个Impinj R420 [1]读取器的4个天线端口）。读写器通过循环调度协调多个天线，避免天线间的干扰。换句话说，一次只有一个天线通电，RFID系统的功耗不会随着天线的数量而增加。请注意，TagBreathe不严格要求多个天线来监测呼吸。只要能够成功读取标签，TagBreathe就能很好地工作。低层数据与天线端口信息一起报告。因此，TagBreathe根据天线端口来融合数据。由于天线在地理上分布，天线的数据质量在不同地点的不同用户之间变化。 TagBreathe根据接收信号强度和数据采样率来评估数据质量，并为每个用户提供最佳天线报告的呼吸信号。
## V.implementation
我们使用COTS RFID系统实施TagBreathe。
1.hardware：我们使用Impinj高速公路R420 RFID阅读器[1]来询问商品无源标签[2]。图11描述了原型系统。我们评估不同类型的商品无源标签（例如，Alien 9640，Alien 9652，Impinj H47标签）。由于不同标签的性能相当，我们用Alien 9640无源标签报告实验结果。 RFID系统工作在902 MHz和928 MHz之间的超高频（UHF）频段[1]。阅读器和标签都遵循标准EPC协议，该协议在MAC层仲裁标签到标签的冲突。我们将传输功率配置为30 dBm。该读写器支持多达4个定向天线。在我们的原型实现中，我们采用了天线增益为8.5 dBic的Alien ALR-8696-C圆极化天线。由于通信距离在10米左右，读者可以用多个天线覆盖相对较大的区域。读卡器通过以太网电缆将带有时间戳的低级数据发送到笔记本电脑（Leveno X240）。 TagBreathe处理低级数据并实时提取呼吸信号。 
2. software:我们基于LLRP工具包（LTK）实现TagBreathe [3，35]来配置商品读取器并读取低级数据。 LTK按照LLRP协议与读取器进行通信[2]。我们编程阅读器来连续识别通信范围内的标签并报告low level数据（例如接收信号强度，相位值，多普勒频移等）。低级数据是用Java中实现的TagBreathe算法处理的。我们实现了以流水线方式执行的所有组件（例如，预处理，传感器融合，呼吸信号提取等）。结果被计算和可视化，如图11所示，实时显示提取的呼吸信号。
## VI.evaluation
#### Experiment setting
为了评估TagBreathe的表现，我们招募了4名志愿者。 志愿者在各种织物材料中穿着他们的日常衣服（例如T恤，夹克，宽松的衣服）。 在实验过程中，将不同数量的COTS标签连接到布上的不同部分。 为了评估TagBreathe的准确性，我们使用呼吸节拍器应用[10]来指导参与者调节他们的呼吸，以评估TagBreathe的呼吸率估计的准确性。 我们在一个标准的办公大楼里进行实验。 办公室环境包括桌椅等家具，笔记本电脑和风扇等电器。 我们尝试了不同的沟通距离和不同的姿势。 用户按照节拍器应用程序的指示自然地呼吸。 表I总结了关键的系统参数和默认实验设置。
#### Experiment results
测量精度是呼吸频率监测的重要指标之一。 我们计算精度如下：
**Accuracy = 1 − |Rˆ − R|/R , (8)**
其中R^是我们的测量结果，R是实际呼吸率。
###### 1)Impact of distance
我们首先评估从阅读器天线到附着在用户身上的标签在不同距离处呼吸监测的准确性。在实验中，我们将天线的位置固定在地面以上1米，要求用户坐在距离天线1米到6米的不同位置。在每个实验中，用户根据在智能手机上运行的节拍器移动应用呼吸。呼吸频率范围从每分钟5到20次（bpm）。每个实验持续两分钟。我们连续测量呼吸信号并使用TagBreathe计算平均呼吸频率。我们重复实验100次。在实验过程中，我们共收集了大约50万个低水平的读数。我们将TagBreathe的实验结果与地面实况进行比较，并绘制出图12中不同距离处的精确度。根据实验结果，1m处呼吸率测量的准确率为98.0％。虽然随着距离的增加准确度略有下降，但实验结果表明，整个实验的精度仍然保持在90.0％以上。随着通信范围的增加，读者观察到较弱的背向散射信号强度和较低的低电平数据读取速率，这对呼吸信号提取有负面影响。
###### 
######
